#!/bin/bash

from_kelvin_to_cie() {
	local KELVIN=$1

	local x=( 0.526785416468973 0.521375331064331 0.516061346363673 0.510844445850463 0.505725403539397 0.500704779594491 0.495782920300467 0.490959961675343 0.486235836048303 0.481610280979546 0.477082849960693 0.472652924400426 0.46831972646639 0.464082332418526 0.459939686129082 0.455890612539548 0.45193383085416 0.448067967313177 0.444291567427034 0.440603107584929 0.437001005978859 0.433483632806955 0.43004931973875 0.426696368640202 0.423423059568282 0.420227658054319 0.417108421702311 0.414063606133538 0.411091470312336 0.408190281290081 0.405358318405592 0.402593876980437 0.399895271547245 0.397260838648238 0.394688939239909 0.392177960738221 0.389726318736947 0.387332458429884 0.384994855765766 0.382712018362729 0.380482486207248 0.378304832160572 0.376177662293862 0.37409961607148 0.372069366400215 0.370085619560673 0.368147115035559 0.366252625248256 0.364400955223772 0.362590942183004 0.360821455080114 0.359091394091883 0.357399690066922 0.355745303941833 0.354127226130617 0.352544475892932 0.350996100686188 0.349481175505869 0.347998802217968 0.346548108886943 0.34512824910219 0.343738401305628 0.342377768122677 0.341045575698572 0.339741073041705 0.338463531375427 0.337212243499527 0.335986523162416 0.334785704444848 0.333609141155888 0.332456206241664 0.331326291207358 0.330218805552733 0.329133176221467 0.328068847064405 0.327025278316843 0.326001946089829 0.324998341875467 0.324013972066116 0.323048357487375 0.322101032944683 0.321171546783341 0.320259460461749 0.319364348137612 0.318485796266873 0.317623403215092 0.316776778881007 0.315945544331978 0.315129331451034 0.314327782595224 0.313540550264955 0.312767296784054 0.312007693990219 0.311261422935573 0.310528173597045 0.309807644596246 0.309099542928593 0.308403583701363 0.307719489880429 0.307046992045368 0.306385828152714 0.305735743307062 0.305096489539778 0.304467825595072 0.303849516723184 0.303241334480445 0.302643056535988 0.302054466484882 0.301475353667477 0.300905512994742 0.300344744779394 0.299792854572632 0.29924965300626 0.29871495564004 0.298188582814075 0.297670359506065 0.297160115193248 0.296657683718888 0.296162903163133 0.295675615718096 0.295195667567026 0.29472290876741 0.294257193137872 0.293798378148755 0.293346324816232 0.292900897599846 0.292461964303349 0.292029395978724 0.291603066833296 0.291182854139795 0.290768638149309 0.290360302006988 0.289957731670434 0.28956081583067 0.289169445835599 0.288783515615878 0.288402921613113 0.288027562710299 0.287657340164437 0.287292157541241 	)

	local y=(0.413280391789564 0.414029578709932 0.414592552796314 0.414980624324415 0.415204858810796 0.415276023871364 0.415204546632948 0.415000480614814 0.414673481021874 0.414232787433481 0.413687212926891 0.413045138738788 0.412314513638413 0.411502857258774 0.410617266706005 0.409664425839116 0.408650616681949 0.407581732494896 0.406463292095344 0.405300455072354 0.40409803759263 0.40286052854138 0.401592105783244 0.400296652365431 0.398977772517653 0.397638807331846 0.396282850029281 0.394912760743847 0.393531180768385 0.392140546226324 0.390743101143769 0.389340909907968 0.38793586910697 0.386529718752578 0.385124052894524 0.383720329638473 0.382319880584083 0.380923919702075 0.379533551671312 0.378149779698262 0.376773512842111 0.375405572869278 0.374046700661164 0.37269756219888 0.371358754148253 0.370030809067917 0.368714200262612 0.367409346303 0.366116615232526 0.3648363284809 0.363568764502899 0.362314162160238 0.361072723863341 0.359844618488912 0.358629984088311 0.357428930400873 0.356241541185449 0.355067876382641 0.353907974119409 0.352761852567025 0.351629511662572 0.350510934703592 0.349406089824795 0.348314931365175 0.347237401133301 0.346173429578025 0.345122936871354 0.344085833909765 0.34306202323981 0.342051399913435 0.341053852278077 0.340069262706242 0.33909750826891 0.338138461356853 0.337191990253608 0.336257959663624 0.33533623119883 0.33442666382664 0.333529114282205 0.332643437447502 0.331769486699702 0.33090711423103 0.330056171342217 0.329216508711485 0.328387976640829 0.327570425281302 0.326763704838815 0.325967665761906 0.325182158912801 0.324407035723015 0.323642148334626 0.322887349728294 0.322142493839026 0.321407435660578 0.320682031339376 0.319966138258725 0.319259615114054 0.318562321979869 0.317874120369055 0.317194873285112 0.316524445267863 0.315862702433157 0.315209512507014 0.314564744854675 0.313928270504938 0.313299962170164 0.312679694262314 0.312067342905322 0.311462785944108 0.310865902950528 0.310276575226494 0.309694685804515 0.309120119445892 0.308552762636752 0.307992503582129 0.307439232198265 0.306892840103287 0.306353220606427 0.305820268695917 0.305293881025686 0.30477395590099 0.304260393263082 0.303753094673024 0.303251963294737 0.302756903877384 0.302267822737161 0.301784627738568 0.301307228275247 0.300835535250427 0.300369461057059 0.299908919557682 0.299453826064066 0.299004097316697 0.298559651464128 0.298120408042246 0.297686287953483 0.297257213446013 0.29683310809296 0.29641389677164 0.295999505642869 )
	echo "kelvin $KELVIN"
	local idx=$((($KELVIN - 2000 ) / 50))
	echo "idx : $idx"
	COULEUR_XY="[${x[$idx]},${y[$idx]}]"
}


from_rgb_to_cie() {
	local RGB=$1
	echo $RGB
	local R=`jq -n $((0x${RGB:1:2}))/255`
	local G=`jq -n $((0x${RGB:3:2}))/255`
	local B=`jq -n $((0x${RGB:5:2}))/255`
	echo "R: $R G: $G B: $B"
	COULEUR_XY="$(/home/pi/dom/bash/hue/rgb_to_Yxy $R $G $B)"
}

set_default_color() {
	local heure=$(date +%H%M)
	if [[ $heure -lt 10 ]]; then
		COULEUR_DEFAULT=7000	
	elif [[ $heure -gt 21 ]]; then
		COULEUR_DEFAULT=2700	
	else
		local val=$(( (7000 - 2700) / ( 21 - 10 ) + 2700 ))
		echo $val
		COULEUR_DEFAULT=$val
	fi
}

